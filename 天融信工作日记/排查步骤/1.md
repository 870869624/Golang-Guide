# 先查看包的版本

```bash
kubectl get nodes -owide
```

# 再查看日志位置

```bash
[root@master ~]# kubectl describe pv topsec-cloud
Name:              topsec-cloud
Labels:            <none>
Annotations:       helm.sh/hook: pre-install
                   helm.sh/hook-weight: 1
                   helm.sh/resource-policy: keep
                   pv.kubernetes.io/bound-by-controller: yes
Finalizers:        [kubernetes.io/pv-protection]
StorageClass:      local-path
Status:            Bound
Claim:             topsec-topngdlp/topsec-cloud
Reclaim Policy:    Retain
Access Modes:      RWO
VolumeMode:        Filesystem
Capacity:          1T
Node Affinity:
  Required Terms:
    Term 0:        kubernetes.io/hostname in [master]
Message:
Source:
    Type:  LocalVolume (a persistent volume backed by local storage on a node)
    Path:  /home/topsec/data ##(日志位置)
Events:    <none>
```

# 进入日志目录

```bash
cd /home/topsec/data/logs/agentsvc/
```

# 查看日志

```bash
tail -200 agentsvc-error.log

cat agentsvc-error.log | grep '2026-01-29'
```

# 查看nginx日志(可以查看到接口流向信息)
```bash
[root@master ~]# kubectl logs -f -n topsec-topngdlp -l app=agent-nginx
[2026-02-04T17:41:23+08:00] 10.27.214.15 - "POST /predict/ocr_system HTTP/1.1" 200 0.084 39 "-" "GRequests/0.10" "-" "10.43.139.170:8866 200 0.084"
[2026-02-04T17:41:23+08:00] 10.27.214.15 - "POST /predict/ocr_system HTTP/1.1" 200 0.027 39 "-" "GRequests/0.10" "-" "10.43.139.170:8866 200 0.026"
[2026-02-04T17:41:23+08:00] 10.27.214.15 - "POST /predict/ocr_system HTTP/1.1" 200 0.024 39 "-" "GRequests/0.10" "-" "10.43.139.170:8866 200 0.023"
```

# 查看nginx日志特定信息(可以查看到接口流向信息)
```bash
[root@master ~]# kubectl logs -f -n topsec-topngdlp -l app=agent-nginx | grep 'CA6ACB10-8B51-E5A9-D09F-F3E3027AD9A'
[2026-02-04T17:42:04+08:00] 10.26.225.218 - "GET /api/v1/agent/CA6ACB10-8B51-E5A9-D09F-F3E3027AD9A6/_heartbeat?status=0&agent_ip=10.26.225.218&mac=00-50-56-AB-6E-82 HTTP/1.1" 200 0.002 782 "-" "go-resty/2.16.5 (https://github.com/go-resty/resty)" "-" "10.43.36.33:8888 200 0.002"
```

# 修改pod配置参数可以更改日志等级
```bash
[root@master agentsvc]# kubectl edit -n topsec-topngdlp deploy agentsvc
deployment.apps/agentsvc edited
```
